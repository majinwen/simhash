package datapark.SimHashSample3;

import datapark.test.FNVHash;
import datapark.utils.HashUtils;
import datapark.utils.MD5Util;
import datapark.utils.RedisUtils;
import net.sf.json.JSONObject;
import org.apache.log4j.Logger;
import redis.clients.jedis.Jedis;

import java.math.BigInteger;
import java.security.MessageDigest;
import java.util.*;

/**
 * Created by dpliyuan on 2016/2/29.
 */
public class SimHashJudge implements DuplicateJudge {

    private static Logger log = Logger.getLogger(SimHashJudge.class);
    private static RedisUtils redisUtils = new RedisUtils();
    private int HASH_LENGTH = 64;

    /**
     * In this method, use int(32 bits) to store hashcode.
     * use 1 as all words weight for simple reason.
     * use Hamming distance as hashcode distance.
     *
     * @author dpliyuan
     */

    public String duplicate(JSONObject requestDataObj) {
        //get words from request
        String words = (String) requestDataObj.get("words");
        //todo:weight calculate
        String weightStr = (String) requestDataObj.get("weight");
        String url = requestDataObj.get("url").toString();
        if (words == null) {
            log.info("no keywords");
            return null;
        }
        List weightList = getWeightList(weightStr);
        //get simhash of words
        String simhash = getHashCode(words, weightList);
        JSONObject responseObj = getResponseObj(simhash, url);
        return responseObj.toString();
    }

    /**
     * @param simhash
     * @return
     */
    private synchronized JSONObject getResponseObj(String simhash, String url) {
        JSONObject responseObj = new JSONObject();
        /*//todo:cut simhash into 4 segment
        if (redisUtils == null) {
            redisUtils = new RedisUtils();
        }
        Jedis jedis = redisUtils.getJedisFromPool();
        Map map = jedis.hgetAll("simhash");
        Iterator it = map.entrySet().iterator();
        while (it.hasNext()) {
            Map.Entry entry = (Map.Entry) it.next();
            String finger = (String) entry.getValue();
            int hammingDistance = getDistance(finger, simhash);
            if (hammingDistance <= 3) {
                responseObj.put("url", entry.getKey());
                responseObj.put("finger", finger);
                responseObj.put("status", "EXIST");
                log.info("find similar  target :    "+entry.getKey() +"   current : "+url +"simhash code is : "+simhash);
                break;
            }
        }
        //todo:if there is no finger which hammingDistance less then 3 in redis,then we put the request finger into redis
        if (responseObj.length() == 0) {
            jedis.hset("simhash", url, simhash);
            responseObj.put("url", url);
            responseObj.put("finger", simhash);
            responseObj.put("status", "INSERT");
            log.info("insert  current : " + url + "simhash code is : " + simhash);
        }
        redisUtils.returnJedisToPool(jedis);*/

        // simhash cut into 4 segment
        String[] hashs=new String[4];
        hashs[0]=simhash.substring(0, 16);
        hashs[1] = simhash.substring(16, 32);
        hashs[2] = simhash.substring(32, 48);
        hashs[3] = simhash.substring(48, 64);
        if (redisUtils == null) {
            redisUtils = new RedisUtils();
        }
        Jedis jedis = redisUtils.getJedisFromPool();
        //  选择redis的db
        jedis.select(1);
        boolean isFindSimliari = false;
        long ins1 = System.currentTimeMillis();
        for (int i= 0; i<hashs.length ;i++){
            Map<String, String> hashSets = jedis.hgetAll(hashs[i]);
            long start = System.currentTimeMillis();
            for (Map.Entry<String,String> hashValue :hashSets.entrySet()){
                String finger = hashValue.getKey();
                int hammingDistance = getDistance(finger, simhash);
                if (hammingDistance <=0){
                    long end = System.currentTimeMillis();
                    responseObj.put("url", hashValue.getValue());
                    responseObj.put("finger", finger);
                    responseObj.put("status", "EXIST");
                    log.info("find similar url  : "+hashValue.getValue() +"   current : "+url +" simhash code is : "+ simhash +" hammingDistance is : " +hammingDistance +"compareTime need : " + (end -start));
                    isFindSimliari =true;
                    break;
                }
            }
            if (isFindSimliari){
                break;
            }
        }
        if (!isFindSimliari) {
            long ins2 = System.currentTimeMillis();
            log.info("insert  current : " + url + "simhash code is : " + simhash + " all time is : " + (ins2 - ins1));
            responseObj.put("url", url);
            responseObj.put("finger", simhash);
            responseObj.put("status", "INSERT");
        }
        for (int j = 0; j < hashs.length ; j++) {
            jedis.hset(hashs[j],simhash, url);
        }
        redisUtils.returnJedisToPool(jedis);
        return responseObj;
    }

    /**
     * contert "0" and "1" string to int
     *
     * @param str01
     * @return
     */
    private BigInteger string01ToInt(String str01) {
        BigInteger num;
        num = new BigInteger(str01);
        return num;
    }

    /**
     * maybe in the future,we neet to cut simhash into four parts
     *
     * @param simhash
     * @return
     */
    private List cutSimHash(int simhash) {
        List simhashSegmentsList = new ArrayList();
        String simhashStr = Integer.toBinaryString(simhash);
        String patch = "";
        if (simhashStr.length() < 32) {

            for (int i = 0; i < 32 - simhashStr.length(); i++) {
                patch = patch + "0";
            }
        }
        simhashStr = patch + simhashStr;
        int gap = simhashStr.length() / 4;
        for (int i = 0; i < simhashStr.length(); i += gap) {
            simhashSegmentsList.add(simhashStr.substring(i, i + gap));
        }

        return simhashSegmentsList;
    }

//    public int compareString(String str1, String str2) {
//        System.out.println("SimHash compare string of: \"" + str1 + "\" AND \"" + str2 + "\"");
//        int hash1 = getHashCode(str1,null);
//        int hash2 = getHashCode(str2,null);
//
//        int distance = getDistance(hash1, hash2);
//        System.out.println("SimHash string distance of: \"" + str1 + "\" AND \"" + str2 + "\" is:" + distance);
//        return distance;
//    }

    /**
     * Use hamming distance in this method.
     * Can change to other distance like Euclid distance or p-distance, etc.
     *
     * @return
     */
    public static int getDistance(String finger, String simhash) {

        int distance = 0;

//        System.out.println("finger :" + finger + "\nsimhash:" + simhash);

        for (int i = 0; i < finger.length(); i++) {
            if (finger.charAt(i) != simhash.charAt(i)) {
                distance++;
            }
        }
//        System.out.println("distance:" + distance);
        return distance;
    }

    private List getWeightList(String weightStr) {
        List weightList = new ArrayList();
        String[] weightArray = weightStr.split(",");
        for (int i = 0; i < weightArray.length; i++) {
            double weight = Double.valueOf(weightArray[i]);
            weightList.add(weight);
        }
        return weightList;
    }

    /**
     * get simhashValue according to words
     *
     * @param words
     * @return
     */
    private String getHashCode(String words, List weightList) {
        StringBuffer simhash = new StringBuffer();
        try {
            String[] wordsArray = words.split(",");
            double[] hashBits = new double[HASH_LENGTH];
            for (int i = 0; i < wordsArray.length; i++) {
                MessageDigest md5 = MessageDigest.getInstance("MD5");
                md5.update(wordsArray[i].getBytes());
                BigInteger hash = new BigInteger(1, md5.digest());
                for (int j = 0; j < HASH_LENGTH ; j++) {
                    BigInteger bit = BigInteger.ONE.shiftLeft(FNVHash.HASH_BITS - j - 1);
                    //Different keyword may have different weight. add or minus their weight here.
                    //For simple reason, all weight are assigned as 1 in this method.
                    if (hash.and(bit).signum() != 0) {
//                        hashBits[FNVHash.HASH_BITS - j-1] += Double.valueOf(weightList.get(i).toString());
                        hashBits[j] += Double.valueOf(weightList.get(i).toString());
                    } else {
//                        hashBits[FNVHash.HASH_BITS - j-1] -= Double.valueOf(weightList.get(i).toString());
                        hashBits[j] -= Double.valueOf(weightList.get(i).toString());
                    }
                }
            }
            for (int i = 0; i < HASH_LENGTH; i++) {
                String bit = hashBits[i] > 0 ? "1" : "0";
                simhash.append(bit);
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
        return simhash.toString();
    }
    private BigInteger fromLong2BigInt(long val){
        BigInteger hash = null;

        String valStr = String.valueOf(val);
        if(valStr.split(".").length==2){
            hash = new BigInteger(valStr.split(".")[0]);
        }else{
            hash = new BigInteger(valStr);
        }

        return  hash;

    }

    public static void main(String[] args) {
        SimHashJudge judge = new SimHashJudge();
//        String weights = "0.02690469029569757,0.013201929066752573,0.003548570802407651,0.005969415470923556,0.006521766333251474,0.05380938059139514,0.004649531802838137,0.009272810361760826,0.00697425664598637,0.02690469029569757,0.004746718140506489,0.02690469029569757,0.047556081528817726,0.006024023971972664,0.007265071337522551,0.005566711483872368,0.005998799041106425,0.00813897640600907,0.004089432895106416,0.008690756275048494,0.025452966845808212,0.007963413631512465,0.007050136145085479,0.008701328878043691,0.005884693551649687,0.010025658871567929,0.01115046596379395,0.006074824887089691,0.007341980094174272,0.01618618609908051,0.008022889122640318,0.008365580354182786,0.013717916703612184,0.0054250979559719425,0.005433832494351359,0.011504144811987558,0.005214044706679249,0.01093790247080885,0.009517436240429208,0.007751017658309008,0.005183668105895707,0.009894345270346173,0.010813737035340958,0.006652973164361863,0.01309150280261854,0.009087182140534729,0.0074756559634023955,0.010781578769665269,0.0037443754206168633,0.0052131636183831145,0.005490824988902304,0.016656761866768108,0.008166810767279467,0.02690469029569757,0.011783278036926291,0.02690469029569757,0.00598700665107643,0.02657141062528715,0.0072868199135270794,0.006193954253164017,0.010991192628649546,0.00873603394865732,0.0142806511487805,0.0029101863299049254,0.006813192529013526,0.021804579370431135,0.014777082880295658,0.005385708454787408,0.00876267828539119,0.007139124077863,0.010541335170228405,0.00430287268921599,0.018412572427877725,0.003441920022916993,0.010124574858406923,0.02690469029569757,0.009930914628085624,0.00713221873198599,0.008906885033243812,0.00971742527858031,0.009188954008362471,0.007608493048536046,0.011188653413023806,0.005246473392381589,1.1838063730106931,0.016883034381670842,0.005915333938208784,0.02690469029569757,0.006071300536267073,0.008146635231159395,0.008693793506947945,0.005583642546451056,0.24214221266127814,0.00954196456368827,0.007547804586621048,0.012183210480913179,0.026529984726271223,0.010604052064608491,0.011211526584746515,0.02690469029569757,0.010148426964732817,0.015988848798746944,0.02690469029569757,0.02690469029569757,0.018128081080048996,0.008994554150203789,0.004698603277545712,0.012035530638095026,0.008334046892463955,0.005554482073135385,0.006757331353352402,0.008271519555241868,0.006108660262846486,0.012065825190930456,0.0072139129130226265,0.020087453717914594,0.008481805524844899,0.005822907997041248,0.0036227157012357035,0.014116830452905255,0.0067115577523259974,0.005664775495173693,0.0063016035189321406,0.026844537806266822,0.009116360862140831,0.02690469029569757,0.007528703465061364,0.002894386419356083,0.008851513804984078,0.009702053531669856,0.004891398362976333,0.007613397213276316,0.007511992543353198,0.00916080669904962,0.007807471757753841,0.009380223820707486,0.007103656416266504,0.011530337834027638,0.002500548313013067,0.08866880613971073,0.00997284183357793,0.004829459978965856,0.02690469029569757,0.015025769520174747,0.006045280966030897,0.0042510338373698085,0.010496705896917667,0.0406573578428102,0.008040289549323685,0.0020656098800640233,0.0071176966256291,0.007222405873968041,0.008387324695775451,0.009095748934670531,0.008244348561906627,0.021146556215754887,0.005616708289657572,0.003925942352081359,0.05964867159350787,0.03393921656338694,0.024475893544332418,0.006147472391797997,0.05380938059139514,0.008746086555536275,0.0055398924133807335,0.009443472691776113,0.00577449470003083,0.01009657570143621,0.02690469029569757,0.004096479794245507,0.0051582518532478855,0.012328291418501598,0.005051783771228454,0.005108752159533257,0.009479288829881354,0.012475678602304755,0.0034983919121982605,0.007360867664746931,0.013678987631933565,0.02343458827255461,0.08518952703227307,0.009083005824355747,0.019427250252447462,0.010214870383438372,0.004859399881006711,0.005158139087938998,0.008317595640746796,0.053350378256027814,0.004527290630862724,0.0054962345536329876,0.009892800397008307,0.010938981538084994,0.00899693379594513,0.013826847184595923,0.010265740057722603,0.018191460098926374,0.009847013912606459,0.008972372375480637,0.021333756671341773,0.02690469029569757,0.014319978346809729,0.005444784990054642,0.011922167167249734,0.009156487407717042,0.00686373103458925,0.005064859146349819,0.0069383107695970645,0.004336657591299498,0.00876719073574471,0.016733544980327968,0.0030678680987988307,0.007097981321221321,0.006297799641671427,0.006919159177797255,0.011840304604199155,0.012076692772944427,0.008489305772364841,0.013238435673074138,0.009632667461008243,0.011189318447541823,0.00991890681700474,0.04069395417906082,0.03931142033249646,0.010824485171121022,0.0122883340291729,0.007707972199415035,0.01466074702019595,0.023390758569893807,0.10761876118279028,0.00416223651292037,0.1614281417741854,0.02690469029569757,0.007216269907797237,0.002941812367565439,0.003444852487614342,0.00505844958265425,0.010426915738014377,0.009300470440592599,0.006552184436441563,0.005060860002485347,0.03819300836153131,0.02690469029569757,0.00970315635166258,0.019830500134405432,0.011149697690827524,0.0063305088944563895,0.009092775012363188,0.011476363986543614,0.006122016105690477,0.004662347390947529,0.00941425117794722,0.010127375161584518,0.013101287430028063,0.049795937419685084,0.007847481464099276,0.030712556030453725,0.010939399462969807,0.008252446418028875,0.005519159433824162,0.030575766009566796,0.015163705369058639,0.006518838837304923,0.011880327716627895,0.008245622999282887,0.013450563709667483,0.014402073966281332,0.013538701040868899,0.008886244129292405,0.02690469029569757,0.0072001718903042565,0.004087489318171837,0.01314443336909177,0.004784792600182992,0.018691130034702224,0.02690469029569757,0.007520021545186029,0.02690469029569757,0.008979263843524167,0.00951969724377036,0.02690469029569757,0.004402643977161656,0.10761876118279028,0.012039092405235803,0.010781881350678,0.006302572264071887,0.007231425645925206,0.006930891135794512,0.013444522445559192,0.00795951583106961,0.008592879914481735,0.012564129237666264,0.0058744965349139385,0.007666625517856217,0.008590560263235519,0.005240047737247294,0.006040819835918642,0.005520729646854031,0.007163335597886829,0.010079466458389114,0.006874690455355586,0.009217442074908827,0.010103188786609029,0.024030035635403693,0.0023938098804480914,0.0072403840660265634,0.006617985957264229,0.015601269025825095,0.009208362624145322,0.008284523137391978,0.010549888066317839,0.0046808183720688365,0.008983993226623783,0.007384320974193807,0.005641110256843122,0.008398793465614158,0.009308642435844349,0.006589163143486272,0.029457677092891384,0.009615707713459242,0.02690469029569757,0.004634150640316403,0.013542325613758226,0.005745596845665207,0.010990017817573429,0.006279276902258456,0.006918413162999964,0.010711980190112842,0.01028462053864803,0.006595620767869752,0.009853930219545497,0.00823589099138242,0.05107324662662033,0.001746008521668835,0.007014253782203533,0.010080025541768045,0.012101930841067515,0.016076668269122987,0.034055114121413356,0.006666652764209999,0.05380938059139514,0.00728185707345538,0.01838276393876163,0.00927145163411145,0.00799520818919896,0.009411290573558223,0.0034857679496499033,0.0244267845825446,0.009862525005301237,0.00958060252444721,0.0045828255176449395,0.004584316549656624,0.02690469029569757,0.00917417375588396,0.011557996994988167,0.007977801158882565,0.0030379326078957144,0.005174308127862541,0.007381326198410273,0.013802153335594113,0.018827295833701106,0.009566478278504818,0.05380938059139514,0.1614281417741854,0.01230822776982739,0.018856902074252422,0.009390429987405859,0.006265993123674134,0.004419166216539316,0.008878936196815873,0.01222234598019195,0.006978656029232747,0.016843005570832306,0.05380938059139514,0.005700894485547535,0.0035699543276740114,0.00928770264273294,0.005762910712912573,0.005239078265027441,0.008912036772146031,0.0807140708870927,0.004068616281978737,0.02690469029569757,0.007846806595669784,0.003004382986147081,0.05380938059139514,0.004571237627590124,0.010972745761142448,0.0066395475188931324,0.009281097954742903,0.06322047309664586,0.03879101505876931,0.012378141466931279,0.02690469029569757,0.013192061863212852,0.006911192770508532,0.006001984932051469,0.004859815905419427,0.008987150597444706,0.00677175206876997,0.008198732926999863,0.009501590185365706,0.0058727790209021245,0.03164352202325814,0.008270611087244762,0.008696748295657294,0.008025509128688105,0.004418792528678079,0.007998478385806322,0.0038345119474487753,0.00830170510817052,0.00544409307248946,0.01951378421374432,0.0056883608411177,0.004998779252345623";
//        String words = "electronics,统有,状态,电力,等方面,选,领域,舒适性,分配,building,利用,主要指,集成,信息技术,应急,舒适,两种,为一体,操作,智能化,系统的,为在,形成了,家电,家用,包含的,实时监控,发出,的状态,所需的,及以,采用的,采用,启动,整体,我们通常,多个,呼救,年代初,都不能,的一个,控制中心,电子化,方式,理家,只能用,称呼,综合,台湾,检测,管理,系统中,包括,碎,也包,家居生活,的一种,表述,制造商,数码,防灾,将可,技术,信息,商用,中央,信息家电,售后,都一,电子,声控,消费,多媒体,都是,软件产品,for,广泛应用,厨卫,日程,主动性,所指,是通过,来管,无线,智能家居,联动,物业,digital,的不同,遥控器,通信设备,是由,home,中关,指挥,家用电器,音视频,居住环境,智能控制,ha,几个方面,自动维护,family,he,小区,驱动程序,之间,以住,有更,声音,的有,服务网,出现了,载波,八大,设备,监视,影院,美国,可以通过,全方位,能源,非法,自动化,描述的,键,触摸屏,更新,体现在,第二种,服务,于一,功能的,的子,会用,闯入,这不,安装有,电话,系统,交互式,这一,electronic,诊断程序,高效,生产,而可,报警,控制的,相关,完整的,传感器,火灾,安保,单个,管理系统,有一个,项目,系统产品,家庭环境,照明,温度,automation,实现的,内的,近似,体的,在线的,net,情况,的内容,红树,就可以,网络,综合布线,括在,上的,有关的,语音,定上,家庭,都有,自动控制,动作,提供,组合,中央空调,智能,理财,实施,技术标准,通讯技术,实施的,定义,应用在,探测,十分重要,总线,必备,intelligent,自动,的发展,可选,烟雾,的环境,带来,故障,家园,误导,网络家居,中的,用户,的功能,融合,厂商,警情,应是,少选,会自,其实有,说它,技术是,住宅,户内,化的,被称为,家庭设备,家庭影院,中,方法,防,20世纪,功能,娱乐,协议,服务器,科学管理,网络通信,便利,也可以,称为,networks,最大程度,必不可少,地安,始终,安装,识别技术,站上,互动,对于一个,来表示,各自独立,控制系统,动向,远程控制,相互之间,新功能,运行,布线技术,装了,开关,对住,这在,场景,如家,家庭网络,应用的,homen,都可,办公,智能小区,房地产,的智能,应,中期,功,管理公司,定有,动,求助,庭,语音识别,便的,是指,灯光,互联网,环境,红外,如对,信号传输,概念,燃气,将与,通讯,手段,执行,技术的,理财服务,地说,对讲,控制技术,语意,下载,或者是,的网络,泄露,通俗,称之为,面市,产品,通过网络,防盗,监控,微波,主要功能,扩展,防范,西岸,式,是一个,加方,的作用,通信,的重要,能和,艺术性,网络化,国的,过程,煤气,背景音乐,中心,管理的,给用户,一些地区,的设备,家居,保安,smart,才可,通信技术,也能够,在内,与家,设置,控制,完整,称作,卫浴,发生,整体厨房,现代化的,硬件产品,响应,深圳,的服务,含义,自诊断,控制和,哪一种,宅,安,控制模块,也就是,及与,提供了,建筑,包括了,子系,居住,安保设备,认,信息服务,香港,来完成,是对,所有的,在国外,家,条件,玻,可视,支持,80年代,一种,主动,会让,原型,布线系统,家居系统,门磁,network,紧急,这类,平台,网络服务,又可以,生产的,电器,电的,在我,网络系统,起源,相连,的自,数字,环境的,数据,一卡通,多种,的技术,产品的,计算机";
//        String words = "电子技术,亮相,硬件,单品,万,计算,互联,时机,冰箱,融合,摄像头,厂商,选择,去年,美金,让更多,地位,千家万户,场我,与发展,水准,智慧,打造,智能化,近日,点燃了,的数量,打通,面临着,依然存在,价格,基因,搭,约合,战场,热潮,发布消息,解决方案,防,的方式,还能,家电,切入,娱乐,协议,化和,维度,高清,松下,客户提供,统一的,巨头,也纷纷,不能与,因素,zigbee,打破,日历,网关,展出,不管是,ces,但是如果,高通,数量,联,已成,联通,产业,新一,提倡,势头,消费的,上传,你家,呈现,至上,物,接入,控制中心,新成员,为整,无法实现,为其,都有了,还需要,批,国际科技,处理器,可以提供,从内,骁,落地,趋势,种类繁多,智能设备,习惯,万美元,再加上,有物,的智能,这块,本届,箱中,布局,更有,普通家庭,意识,显示屏,均能,add,良好的,显示器,数码产品,技术,wash,不仅能够,更多,98英寸,语音识别,发展,音乐,显示,所能,时间,电子,空间,homekit,载了,环境,消费,vr,或将,科技,普通用户,心中,的基础,多媒体,轮的,展示了,拥有,家庭的,日程,更强,生态,的处理,调节,不同的是,仍将,另一,坚实的,智能家居,消费者,高,参展,这意味着,两年,的情况,ora,825065.5元,想要,上架,出让,互联互通,众多,作品,音频,home,等大,极大的,的最,推出的,产品,家用电器,hub,下推,在大,手工,健康,壁垒,family,面向,链,等多,进行的,行业的,创新,间的,图片,用电,提高,展品,带来了,液晶,表的,诸多问题,统一,助于,普及,拉斯维加斯,化,之上,的多,设备,建立,可以通过,全方位,洗衣机,并以,这就需要,还是一个,通则,企业,更新,承受的,能力,生态系统,效率,标准接口,的碎片,服务,用作,家中,三星,电视,孩子的,如火如荼,全新,的设备,家居,白色家电,迎来,串流,舞台上,smart,也不是,链的,生态化,燃点,企业的,自身的,行业,一块,推出,站在,正,上游,看到了,全,芯片,硬件产品,这一段,联网,展会,置,协议的,分享,闭环,市场,碎片,具,发售,为核心,时机成熟,提升,lg,传感器,松,新款,售价,现场,传播,brillo,争相,安,照明,困扰,而与,话语权,展示,更成,reference,全球,尖端,便捷,各大企业,亲民,无人驾驶,快速,扬声器,龙,境况,提供了,情况,厨房,阻碍,时代,推,各大,化成,smartthinq,首批,就可以了,都能,改变,致力于,传统,是一种,家,更是,下物,家庭,支持,动作,出了,21.5英寸,提供,留言,提醒,platform,智能,全局,苹果,平台,智能手机,旗,简单,都在,推广,smartroom,数千,将会,为代,电的,谷歌,测量,火热,屏幕,路程,代表,数据,音,高达,传感,的理念,不仅是,无线技术,wulian,中的";
//        String weights = "0.010940787420191988,0.02387058386925264,0.007205360486262717,0.008696850772094786,0.034633674053370686,0.006285438674182238,0.008256702483826494,0.009863681003989929,0.012831551674739804,0.008906844905237193,0.007782167209565347,0.0076208505997936386,0.0034053181186091356,0.007549188175457425,0.010956182440284857,0.010359966696369826,0.00882186351243048,0.013612459491628474,0.01810050205318899,0.010367644596699352,0.010919219559409275,0.03697307585815657,0.005712582472696176,0.06712424119346545,0.00779352678570895,0.01331275875988935,0.01006199335533376,0.011880014469613483,0.01182295332176178,0.027224434144006413,0.0122296009912538,0.009657161543595333,0.034633674053370686,0.012932210909130363,0.008966394389002421,0.010749327625718562,0.014201566184037622,0.008119377445182482,0.034633674053370686,0.007051602104035286,0.007111650805827226,0.016801475033604362,0.013160387076970748,0.0037869148295206012,0.004434464656783553,0.01900625814479082,0.01303698404788543,0.00557473543754368,0.017116770591469717,0.009708002214294464,0.010847648596998912,0.03097513076434717,0.012725384641527551,0.012103104325425629,0.0072324697167361115,0.034633674053370686,0.009578204861303079,0.008074495291155136,0.011990586679697249,0.011096766459798839,0.009870808666487249,0.13853469621348274,0.011552732813526123,0.012218319265151847,0.004876156258403214,0.034633674053370686,0.01021032741019168,0.006866962311919332,0.0066165694475759426,0.010862241221238474,0.010515319836113753,0.02301576029235217,0.011988813334982697,0.004816420473891934,0.0106590826635335,0.01654472984277235,0.010212546715701985,0.10390102216011207,0.021034948784634362,0.012736720820736529,0.013601548054477136,0.015115128038943442,0.014029487753712771,0.00908160623776979,0.01184794355388759,0.029371476599354993,0.034633674053370686,0.015151056837259192,0.009302185150578825,0.011941271430516045,0.01267061693436624,0.034633674053370686,0.019370385904357853,0.01531508482083748,0.013023970530312241,0.016297506740156873,0.007887860975425777,0.010074161516982755,0.009121810861143966,0.015273989012720696,0.02406058193558032,0.010809116412363375,0.022940134515966926,0.01152447782171598,0.03513686430328011,0.008239041431333574,0.015173311283690503,0.008028806259468179,0.009265707928787337,0.012917842451439449,0.034633674053370686,0.007332759414548678,0.007404866274284483,0.034633674053370686,0.00919154637576054,0.034633674053370686,0.014540223484415192,0.005675377465501477,0.034633674053370686,0.01549759531437627,0.022355801963641748,0.0036701363483773813,0.004143801359407706,0.010480976229064016,0.00397220240381743,0.004594999861024549,0.0036574618735869535,0.10390102216011207,0.010571970504322332,0.005768922358458126,0.005538970661754402,0.034633674053370686,0.009554824611045992,0.004278175528759313,0.012289883532962984,0.006883279882903065,0.008869457032014161,0.00790066744178026,0.011273271825882865,0.011413043724167043,0.0053049394060729164,0.010631625876054294,0.011465590188248399,0.010321917233573246,0.024242804593134895,0.01002227629714875,0.007975604370380024,0.011218856970696458,0.011318074213586373,0.007872599845216923,0.012742807256948416,1.0736438956544914,0.012469547908979133,0.034633674053370686,0.021825164476976123,0.011493834117955409,0.008137305035678758,0.0070314252553640355,0.06926734810674137,0.034633674053370686,0.006580655528555598,0.006310733385710778,0.011404427465290756,0.045435520201902446,0.02238750060251338,0.005207346385905598,0.008742837122726846,0.034633674053370686,0.011276244671331441,0.010310574823842799,0.0073323388833830905,0.009411944269617547,0.03314019407424736,0.007841557291351392,0.13853469621348274,0.016148280271480252,0.008268936036323992,0.007750557126558687,0.003947301937412732,0.025761912779892624,0.06926734810674137,0.008778033575129116,0.034633674053370686,0.009711220493987054,0.00992040904589494,0.008819703437750674,0.013359136665059248,0.01648467696594749,0.002555892883006447,0.030716355570649015,0.00586628810815434,0.012987418755365665,0.009326963874984745,0.009032270126906118,0.009159858401529162,0.014600846402471846,0.007733572485977498,0.011687717454737522,0.01953428171118645,0.011866302721538293,0.20780204432022414,0.008484380223647057,0.009032130676749649,0.04654445639656429,0.006710482145267683,0.009086105418779019,0.008639605252085103,0.013236338715577233,0.010547659032920816,0.01366352738083385,0.012127624905530541,0.014409547275927371,0.017850820497418485,0.0037258646998256486,0.012290000670914718,0.006110442703643103,0.013860190813318645,0.008294661110934434,0.017072217488742613,0.02728861073442574,0.0020988545702952995,0.010524428637317496,0.008547923161995956,0.01068813854265824,0.010250914582704704,0.008708674379473138,0.012491412242986378,0.005395822024936415,0.0310425849123793,0.008767643926531147,0.01461657147812219,0.008297978729301358,0.01550680007839641,0.012216478165914656,0.034633674053370686,0.008400745516349629,0.024394635974407775,0.03388802912173068,0.015475026399595103,0.008026081923417985,0.009639725683910754,0.02212730894100637,0.007974416971909652,0.020799034274970735,0.007159611663249404,0.034633674053370686,0.01108290298653192,0.00870391731240668,0.034633674053370686,0.008832616328729757,0.014878294313548404,0.01253591348264181,0.0465597911954018,0.0408071232687509,0.034633674053370686,0.01250029528999396,0.0027061002741731286,0.015818463757005,0.003897322027413252,0.03319187198385675,0.034633674053370686,0.010018628484548932,0.011257612035927634,0.01506258964067432,0.005985599168088966,0.06926734810674137,0.009297206106853405,0.034633674053370686,0.0055136377686703375,0.013051635702420026,0.0060609540661601385,0.006758789632270509,0.10390102216011207,0.011885961021878517,0.034633674053370686,0.007876787558812434,0.009694976931782798,0.012506533691745562,0.013013937829945468,0.009761479983517667,0.014315666727990535,0.034633674053370686,0.0048930727504517,0.011361255258449261,0.00699521413227468,0.031131733252243467,0.02315054639124967,0.014588126596786436,0.0037479698341792928,0.011378521947600513,0.034633674053370686,0.013741491679349668,0.008066042057384159,0.005273286716956034,0.005431672085155217,0.010526089696967111,0.00586355663963546,0.06926734810674137,0.007765063925502299,0.010914795915041976,0.06926734810674137,0.019034302485058534,0.008824901888665856,0.007550079750937104,0.006765133274572814,0.033123552166970195,0.006727049504280773,0.007062569571221216,0.034633674053370686,0.006879797163301418,0.01753696559763107,0.027415538699476973,0.019337301401746665,0.006574662028613062,0.012375339473061936,0.034633674053370686,0.006255372937732275,0.00362234566988474,0.005635060211777171,0.034633674053370686,0.04370321894824361,0.011375164737717753,0.011865137323253304,0.06953572361278539,0.034633674053370686,0.034633674053370686,0.011811245522624495,0.006875108113959046,0.004471919112148941,0.034633674053370686,0.009781255437525909,0.007648663658267996,0.011905407506390854,0.01223113791134349,0.13853469621348274,0.008714963550342899,0.007701302197593887,0.007773117814639362,0.010672552146543671,0.005959743113136928,0.004936062652352241,0.034633674053370686,0.007854101171133282,0.013082095181671463,0.010027820848892909,0.010347479433950984,0.014985767676464222,0.034633674053370686,0.003949182934453768";


//        String words = "用户,内热,硬件,的解释,公司,单品,领域,的一部分,厂商,商务,千家万户,缺少,业,无论是,场上,要走,当得起,不可或缺,的是,足够的,最多的,形成了,中,网络安全,功能,狂暴,门外,简单地说,房,公共设施,统一的,水龙头,什么样的,行,数量,始终,表现,要让,节点,并不理想,的一个,nest,看成,照明的,心病,的价格,会展,系列,中国,影视,走进,各行其是,都已,网络带宽,有效的,的智能,上网,的担忧,布局,极致,又如何,流量,的理由,间中,优势,率先,还不够,疑是,最大的,最广泛,然地,分布,互联网,收购,都是,新兴的,功能上,领域内,生态,是在,则还,智能家居,的情况,内容,成为了,应用领域,涉及的,最有可能,有从,协议标准,众多,奢谈,纷纷,算得上,抢占,产品,彼此间,徘徊,很长,创新,模式,走的,必须承认,带来的,的不足,欠佳的,统一,普及,出现了,入口,的作用,化,通信,外,受限于,设备,市面上,中枢,做是,开启,天然,局面,伪,之名,弊端,企业,生态系统,众多的,这无,一款,相同的,电视,市政工程,的设备,家居,上面提到,道路交通,不同品牌,整体而言,有办法,应该关心,都没,业中,因此而,从目前,都被,行业,一块,而对,的入口,从智,都有其,不容忽视,硬件产品,很自,市场,碎片,最基本的,主要是,昂贵,有其,我国的,重要的,似乎有,场馆,起到,照明,困扰,才是,还并,亟待完善,体验,酒店,孜孜追求,连接,本质上,传统的,网络,路由器,一环,疯,命题,传统,统治力,未成熟,冷,更是,在这个,互通,出了,遇着,智能,在市,它能,是个,等一,推广,观赏,资源,集中在,采纳,联接,现代家庭,谷歌,上游的,走得太远,也遭,的路,较多,台,分流,地在,连一,未来的,影响了,想的";
//        String weights = "0.017820463742640763,0.024724530559628546,0.014053008040583312,0.019920983072387446,0.005126921233540736,0.016961942995220327,0.02334658522276171,0.021048240531056684,0.014863361098888302,0.009361689384057608,0.026549123121970428,0.036910434110264435,0.06754794584877262,0.016873340762200695,0.018864785673510867,0.020298905571367556,0.034765858815772904,0.02296274872322307,0.02854106647723186,0.01951472913250367,0.01828227334217631,0.017700341811065667,0.06754794584877262,0.019951340319299248,0.009058721799149723,0.022733927876048256,0.01789875190641225,0.027961584840607383,0.06754794584877262,0.024444137459968342,0.021156761448047522,0.02161010046867615,0.016589116046418374,0.06754794584877262,0.009510233837311232,0.0158936180754437,0.013919515935004699,0.018428532084849875,0.022719216945130585,0.029767025831230066,0.013014315670121138,0.06754794584877262,0.02390759692727683,0.05972473097523784,0.02508455441583296,0.014219447050292988,0.013499035757638911,0.008543016960605415,0.004933124862943126,0.009045306983382708,0.014557826777209211,0.035178991489732366,0.02010905738603666,0.02330204767826187,0.01618598123882697,0.07039000034345307,0.010908034063273722,0.024115453404480573,0.017132336318088706,0.017882435961141866,0.02280707158870457,0.015004764299685837,0.018094963104509015,0.023956324127404144,0.01393140738012445,0.018303881794230533,0.02196644066746566,0.023999784115776805,0.011704561961024328,0.027074061537343486,0.023453345642857507,0.016645582759398925,0.017400960723909627,0.016095129532421027,0.008641416227749046,0.02527373925398366,0.02721311701643522,0.027703791801839857,0.015760688565276824,0.01125819425575305,0.030879678729256083,1.1483150794291344,0.01371377266117099,0.005929311241458463,0.018202898320869687,0.024471553283737978,0.022004450505437964,0.0280205716260273,0.023734968551437332,0.03671934891780803,0.01455452166830066,0.03448592290583348,0.016122566992209545,0.026455137074500402,0.022253000360925854,0.023503683740600967,0.028840669130763524,0.02041857987790058,0.020470196513570994,0.013027526889685436,0.010009405123113185,0.018634386344039227,0.0311477279795126,0.01623698374580422,0.022267197856063188,0.03430143602630749,0.015083208749246893,0.019049388193532888,0.015336636404593304,0.10076226694665281,0.014425115484861582,0.06754794584877262,0.013795979813549623,0.06754794584877262,0.03211401671746056,0.010086466122186902,0.022419169982339927,0.025617857193537284,0.025287247770165087,0.013866136768365334,0.013838305535700314,0.018564064835959623,0.06754794584877262,0.021063480034545428,0.02293963122323319,0.01392617201926265,0.054064574094505345,0.020714578379449896,0.026077596546215703,0.029774707216082646,0.01863441171610287,0.03998583702473466,0.024390631795949594,0.020181349529324603,0.008550007375163352,0.030599224234326875,0.024793765116342445,0.02921679529832486,0.03133712996479016,0.021186993756357096,0.037465595948612755,0.014857110593589611,0.019819162832709004,0.022846498909824747,0.04884635193723135,0.016883192596732165,0.008631219799683336,0.015552940902660668,0.019036109610944162,0.07681483788859425,0.03376848545715595,0.027459675719480523,0.024712638799838028,0.058035899804621434,0.025406129017723187,0.0076011599825435774,0.02157864017863027,0.02338790357086383,0.016028405548877443,0.02264601347327755,0.02098635981791631,0.02061880596565502,0.015675260815575586,0.0251473655627545,0.021212330750024534,0.017452861829295684,0.06145011570704735,0.037817285904117294,0.013823188344354602,0.03146624285920516,0.035854284177474,0.01994922881263923,0.008534955110858047,0.03634775189109497,0.024310070850004407,0.0262508656137021,0.01747973310179914,0.0064131144130311095,0.05848157422011517,0.023076806405852964,0.06754794584877262,0.02112309741612256,0.013120132011895125,0.06754794584877262,0.032033183130947385,0.06754794584877262,0.013418044112821914,0.015368472125820693,0.020370021011524218,0.012068150195361817,0.030236012995017148,0.1582968670111154,0.019755301956137263,0.021544301333755463,0.011981975567710797,0.01810710626679267,0.008721828055609636,0.020066300938101037,0.009684346759765644,0.020677401377117627,0.015206231383803252,0.024969305828350878,0.03183520990558234,0.06754794584877262,0.030410761974209166,0.03393368409358026,0.02883326498993298,0.017632994880205657,0.018088524844572566,0.06754794584877262,0.023185054897959943,0.01939543908765313,0.023480307892133085,0.018116471202355183,0.020824753782669653,0.018274474155440746";

//        String words = "球,硬件,公司,领域,冰箱,摄像头,整体实力,路透,美金,同功,值得关注,有一,可能的,搞,让人,解决,的问题,智能化,的是,流畅,找到了,发明专利,家电,切入,成员,恒温器,摇,dropcam,星的,余项,很可观,行,zigbee,发展成为,不管是,案例,ces,夸张地说,整体,联,发布,焦点,合作,调研,葡,汤,董事会,至少,控制中心,月的,四件套,国际化,决心,也有,综合,来等,也需,十分明显,目前的,出色的,有了,而在,人气,五花八门,需要指出,技术,数据显示,报警器,该公司,gps,时还,身上,成功的,homekit,足迹,花费,积累的,100项,更大,都是,面对,单薄,空调,拥有,扫地机,核心的,项发明,近年,每一款,无线,智能家居,上榜,在相,销量,有分量,企及,业内人士分析,森,盘点,quietside,1月,长的,压在,面向,各类,链,较少,更加注重,之间,说的是,模式,现状,蓝牙,吸引了,可以满足,门路,了以,2月,急需解决,设备,插座,一定的,专利技术,联盟,新品,第三方,强大,自动化,知识产权,新产品,笑到,通信协议,这几,冠绝,一款,三星,加快,实用,全新,尊敬的,生态圈,涉足,商业化,需求,4月,储备,联在,模块,也比,且能,可以为,产品名,这是,囊括,自带,一步,基本形成,联网,不断前进,不值一提,多款,市场,技术研发,相关,软件,未来,完整的,质疑,提升,实用性,传感器,重要的,领先地位,有待,过硬,适配,相关的,品牌,但就,过程中,两年来,轻量,松散,雄厚的,7月,上的,家庭,是一,动作,也不难,检验,大且,包含,供一,多国语言,智能,实用新型,8月,亚洲,营销策略,几家,足够,使其,赞美,谷歌,花了,较多,thread,我们就,烟雾,微小的,发现,无线技术,真正意义,起一个,是目前,处于,用户,覆盖,在国内,鱼龙混杂,软件方面,为大家,极具,app,国内,化的,多将,最好的,smartthings,中,类似,较慢,解决方案,研发,功能,开放,产品线,多方面,会上,都很,联合,以低价,南京,手机,还未,还没有,大于,望其项背,一摇,小米,笔记本,且已,坚定的,灯泡,全线,服务的,能提,器,物,nest,主流,关注的,公布了,中国,批,成了,最具,生力军,专利,场景,计划,tv,落地,参与,并不止,一直是,名声,房地产,的智能,标准,多项,布局,在发展,范围内,希伯,全有,庭,大问题,盒子,时间,脱颖而出,实力,年花,一个问题,收购,经销商,唯一,粉丝,亿,电商,定量的,产品推出,家庭的,专注于,生态,apple,奠定了,苹果的,高级,多钱,相继,显赫,国际,拥,互联互通,一段距离,资金实力,awe,不排除,地气,市场竞争,英,28项,产品,超过,凭着,壁垒,力是,行业的,领先的,2015年,角度,圈,然其,通信,特色,到位,亚马,旗下,能和,wifi,洗衣机,的生产,笼络,企业,是完,众多的,兼容性,供应商,严格来说,电视,统是,力的,家居,不容,实质上的,在全,协,增值,创业,业中,潜,推出,行业,一套,与家,2014年,真正意义上,加分,越过,完善的,手表,完善,影响,级网络,关的,跳开,囤积,足以,强大的,两大,光环,话语权,是近,从长远来看,全球,初创,连接,宝,传感技术,潮流,实,弱点,能不能,接,有限公司,推,小觑,网络营销,逊的,成熟的,五家,设计,家,远多于,生态系,坎儿,支持,达,意图,俄,人等,见其,出了,稳定,家居系统,进展,领域的,激烈的,相比,推了,苹果,辅助,平台,智能手机,足可以,发展潜力,世界上,技术方面,影响力,研究中心,难以,和美国,多种,影响的,构建,产品的";
//        String weights = "0.026093864012813533,0.00542869625677328,0.01188322017417935,0.022547044632941105,0.004833803713086913,0.01172655332948203,0.011191215256623172,0.010525061820363628,0.008254658002954343,0.013373691274618914,0.009530929302845667,0.005934853159341994,0.007889750852818771,0.026093864012813533,0.004815373363527052,0.0039514382474477,0.004084168406896998,0.008428843072238812,0.0036751510258353354,0.007283571489101144,0.006754231513713124,0.050325447390267335,0.01265864557326356,0.00991536012648481,0.016306956923331294,0.012568179445317408,0.026093864012813533,0.052187728025627066,0.008042573194647401,0.010374507662848018,0.013076553352568727,0.026093864012813533,0.13046932006406767,0.008970511440751925,0.00743691063913423,0.005089598773609618,0.052187728025627066,0.012109407315104318,0.010540146317810308,0.13046932006406767,0.006100592887041966,0.005289563806637009,0.00502158783156988,0.006329481010749513,0.026093864012813533,0.026093864012813533,0.024329863297587014,0.005335207429010039,0.009596159522472726,0.011994976505149874,0.026093864012813533,0.015651668232945226,0.007225425419344678,0.009298047371932402,0.003485551492658909,0.01112320801799809,0.009181553396044904,0.010620487083482375,0.006970726318947941,0.007983348509886802,0.004845993076650696,0.012378005095074465,0.0035977823893690577,0.008429654571928024,0.011580943040839734,0.010387706520551295,0.0077823658521614875,0.008909470807121001,0.018577218577087534,0.026093864012813533,0.007245193532228956,0.004893702509916764,0.006345904410188931,0.0782815920384406,0.007305992193027323,0.00727075887587042,0.009553407091344893,0.026093864012813533,0.006742840290934359,0.0033381909263359333,0.005177741224794552,0.0098437712216563,0.008621015685069079,0.03996872155260416,0.010426645091352311,0.00982114037364141,0.026093864012813533,0.007933675005004562,0.026093864012813533,0.005088360495624883,1.1481300165637955,0.008180415048364684,0.009458924953551417,0.004385376212405235,0.01278814600485104,0.01139927665415873,0.01105049550555401,0.026093864012813533,0.0054929793762396074,0.026093864012813533,0.026093864012813533,0.006210204251848019,0.008064742043315363,0.006613586940165772,0.0049415618026105845,0.026093864012813533,0.00808686307516957,0.01063307480662013,0.009114003069869491,0.008168211459904788,0.0038666469105724907,0.006343516222973971,0.0108083749411063,0.007664516267642148,0.00941818640279689,0.009252440467070992,0.00786690131482954,0.026093864012813533,0.012853909342098369,0.01558566272031072,0.007740941771643063,0.012284337725152463,0.009298393604889656,0.010634570857590888,0.0043142763561025855,0.01318620963088514,0.006010483826433526,0.006508881084533189,0.006360428708884873,0.007184674720846485,0.009268462882028717,0.012483431319268809,0.007837937536491117,0.011392380400113367,0.005751005092421443,0.04428988916649476,0.006332575388744053,0.005313915653026236,0.0040653453612534635,0.007511802926581059,0.012392839462534564,0.0090268308488242,0.010141081232651547,0.004535733003335278,0.026093864012813533,0.015227555394557274,0.01121004028139329,0.006293224159428857,0.007487501136441166,0.010419466959424653,0.008797600995247842,0.00821677005664275,0.0038922636901660766,0.008927076705327169,0.007405186618821963,0.005101841985628067,0.011397474281616317,0.028063435789009307,0.012088964958146662,0.0110883682177489,0.0073631938286531215,0.002936338513804505,0.009475533291720495,0.00200335862340456,0.0028879429795819157,0.0045349272501624205,0.00690319069992521,0.006421594507745869,0.009019396006709401,0.008584078084053967,0.007004744327081333,0.00605537472601687,0.009821966991796422,0.016678328254916157,0.009124905821535472,0.009997828348775441,0.004977141851587218,0.002417229753489097,0.008943484651083949,0.004697972526039454,0.010616220573646919,0.010668017569674662,0.010460609140456961,0.008151540054818657,0.026093864012813533,0.0033929609230635184,0.004131108571154065,0.008605350799808885,0.009907024974622421,0.011109832181974448,0.0062931533001569185,0.011034441289445241,0.005595573569236398,0.010754613439506778,0.010468128575952492,0.07055803450548136,0.010405222560555701,0.052187728025627066,0.005090472996278115,0.018033787670108853,0.008188998185243483,0.006739471058554594,0.007067962849700375,0.008071965715852277,0.26093864012813534,0.006936947180893931,0.006987621926259539,0.026093864012813533,0.006953219211718272,0.008880538472142008,0.01032921429967062,0.00347164040585912,0.011290646879527837,0.009461311367014813,0.01019580006099078,0.0074477010882251,0.005810704402498949,0.002294689851792098,0.0130572914578335,0.007290412274889392,0.010905658130884588,0.024599680402804556,0.007388167176573383,0.007687386255807702,0.026093864012813533,0.007629100738918563,0.005959000337434529,0.012605733847016522,0.004835025685830819,0.10437545605125413,0.052187728025627066,0.0058970030311664085,0.008823426636957931,0.006117339171027897,0.0056603551863538045,0.003499396640219482,0.003881678094559038,0.052187728025627066,0.009571881994347895,0.006580741333172214,0.006110438760805865,0.0053171287147334685,0.01194519756952395,0.0034340171728682767,0.008541369321982031,0.006471181544237154,0.008889804832057348,0.006645723509625147,0.01263268524237134,0.011250155100018802,0.09411389542892024,0.003960844656576431,0.01081362059628627,0.008971328446338418,0.008089127947817593,0.008096910601146675,0.0063743328201057575,0.00898320950414298,0.026093864012813533,0.26093864012813534,0.0782815920384406,0.0062872739222249886,0.00617533921567906,0.00839143556745879,0.0019056728922602216,0.026093864012813533,0.004829308358837788,0.012219408668831479,0.010861614590820981,0.046172843609446616,0.013045204255403531,0.0041293946508311865,0.026093864012813533,0.007297063183148505,0.004161384595093369,0.013208158760842125,0.007729701528545771,0.008999265057715766,0.004640593371136381,0.03625567140977856,0.0038150953595043257,0.00722288311885575,0.039709469931789164,0.009603448882120818,0.006440464036283099,0.012252800432970341,0.010529101028387316,0.026093864012813533,0.008610660763464943,0.014551863551575832,0.0014963776178764292,0.008572194723792137,0.021280257241127455,0.010979434003643988,0.008072418793931736,0.018652711759490667,0.005242820988087491,0.010594544034691723,0.0048497868682705544,0.052187728025627066,0.00803025796712727,0.011478378846984152,0.013010862403086486,0.00801012908469844,0.007644567473028132,0.012176751165501544,0.026093864012813533,0.008929403037785513,0.028175798621066665,0.003790840677306295,0.008802776096554835,0.007768822948790709,0.009926311161716,0.005916888851196551,0.026093864012813533,0.011410747082669565,0.010395494892513546,0.010873010220727791,0.026093864012813533,0.008890801786856934,0.011205466269503975,0.0085268545477377,0.026093864012813533,0.026093864012813533,0.03404814459682948,0.004727460531968641,0.008256830145882202,0.009704830156808866,0.008611964635722016,0.006644982042140919,0.007005213594398807,0.052187728025627066,0.005760634548582781,0.026093864012813533,0.011390706554634165,0.005329405900576704,0.004056723613084884,0.007032456825912546,0.010871025993755182,0.004841182265940842,0.0067099130402794175,0.10437545605125413,0.004986291981895533,0.006985033884111778,0.011466488288440388,0.026898496639945663,0.008594854206197697,0.008002070004116261,0.009280424656510527,0.004945015729720191,0.011761589580034893,0.011584937713330657,0.009792667411335948,0.005617031871736667,0.003302879561364473,0.007691142696885429,0.013246054405251752,0.007653797690670915,0.026093864012813533,0.004637269738740836,0.0048363790545254606,0.007656169751813616,0.026093864012813533,0.026117508792771464,0.020005512193238633,0.005761071835496142,0.009127662638464687,0.13046932006406767,0.011159108420054444,0.0074131505481149175,0.008734251927286217,0.006957402435968868,0.004230265143955971,0.010727189258637304,0.0042509409255464346,0.012910431251007758,0.008007743283821997,0.01213549976211254,0.00997619329193256,0.007032281947645412,0.006212656434327192,0.0068343424344829325,0.00870764850499585,0.00980502165269864,0.009293790346510532,0.012333369888358365,0.01843280830649613,0.011041923743378241,0.0046955068354118095,0.026093864012813533,0.012288344941565423,0.005182907842568906,0.026093864012813533,0.008378799977739484,0.006614201919600949,0.026093864012813533,0.0025512664151566295,0.052187728025627066,0.010310486773718054,0.005693559766482018,0.010870167734783026,0.007767835999684872,0.010538241045776345,0.003253824905147389,0.0782815920384406,0.013304214356961603,0.014537722730634502,0.012482503048072021,0.0029138399372494977,0.026093864012813533,0.007540017505750148,0.026093864012813533,0.008833943756218977,0.009869377247721186,0.009323885904361734,0.005480619221737207,0.02508131384621796,0.007093008541039632,0.021901471600512635,0.007868396072390076,0.005337536593141329,0.009112896812733529,0.05810666565839803,0.005975493981952252,0.01164220638874641,0.026093864012813533,0.011492656385655832,0.009725188478001332,0.006139533813715514,0.010532050485810431,0.043046164012296835,0.005370311830539064,0.012303926883789715,0.008946801997638566,0.005280024514140463,0.008140879131410974,0.02031048673539486,0.005516930788371687";

//        String words = "";
//        String weights = "";

        String words = "用户,内热,体系,公司,万,好几,禁得住,领域,厂商,成,关键,多说,创新能力,很多方面,尝鲜,时间的,生存,创,舒适,app,的问题,打造,调试,操作,两,的是,一是,提出,性,这些行业,某些功能,价格,彩灯,太急,痛点,发明专利,解决方案,研发,了一,大家都,都要,化了,国内知名,市场环境,落,问题在于,用起来,加法,几个,局,手机,而他,失去了,技术上,生存的,深耕,需要时间,余项,的生活,手,望而却步,打破,zigbee,质的,开辟出,着实,联,更简单,沉淀,缺乏,分得,还有的,到了,新兴产业,偏高,知识产权局,产品定位,尴尬的,物,做好,环境下,火,整套,的价格,就把,造了,系列产品,智,但由于,只能用,学会,场景,专利,加在,落地,也有,智能设备,一致地,会做,赋予,的智能,还存在,有了,标准,很大,简单的,咖,发展思路,岗,2007年,已取得,鸡肋,还是在,形容,自然,尤为,在发展,时间上,发展方向,增,都与,技术,兴趣,宣称,该公司,暨,更优,静下心来,的关系,时间,如果有,实力,同质化,环境,要下,四是,概念,现象,都是,埋头,不强,的影响,立到,新和,值得,尴尬局面,是在,存在的,智能家居,的束缚,消费者,两年,等都,的情况,市场中,易用性,业内人士分析,都知道,面世,已经有了,就更,注,减法,抢占市场,也正,却依然,面市,产品,火爆,健康,定位,打磨,不统一,面下,很长,已经有,题了,力是,一件,创新,行业的,需,迈进,急于,圈外,找准,更好,圈,的需求,高峰,蓝牙,统一,之路,不佳,普及,抓住,机化,们的,飞速,自身问题,29项,时间内,又该,设备,产生的,一杯羹,资金,要实现,怎么用,wifi,洗衣机,就着,缺乏的,局面,未,二是,原因,走过了,企业,朱,做一个,技术专利,做加法,供应商,应该加强,新能,经过了,忽视了,操作步骤,行业标准,年头,说到底,三是,涌入,这一,目的,才能在,自身的,行业,论坛上,推出,一套,的原因,高效,取得了,竞争,九个,终极目标,重要性,市场的,能给,联网,创新的,市场,在产品,自不,方向,技术研发,相关,未来,带给,完整的,实用性,载,也说,三年,迎接,砝码,基础,转型,减掉,全球,便捷,大几,体验,是问,过硬,好的产品,产品价格,简化,只为,阻碍,道路上,获悉,过程中,不兼容,筹码,摆脱,虚高,都能,反映了,与公司,家,冷,也就,都有,存在的问题,心累,检验,值的,标准问题,前景,增加,家居系统,俊,在短,是少,智能,实用新型,得到解决,下了,认识到,操之过急,受,变,就开始,简单,等产品,研发能力,不明确,不难看出,指出,贵了,在向,企业自身,从国,是为,然也,注重,总裁,自己的,道路,的发展,还要学,但我们,专家指出,就不,网大,降下来,的技术,重创";
        String weights = "0.030395387754584852,0.014057091971401713,0.008069626776386174,0.005829805596203579,0.03840427566401992,0.01174127978545029,0.020441018257380022,0.006636831686309277,0.05070323987765929,0.03840427566401992,0.009062688062117156,0.012274883507268424,0.026102048998598394,0.0158300212275652,0.014406566005837854,0.009833657255175151,0.009193274572257057,0.03840427566401992,0.007946031714882331,0.11521282699205974,0.02404389465350652,0.0063345168548042275,0.011318884360999657,0.005837335664788996,0.03840427566401992,0.005408992437217328,0.009166688826650556,0.007342204391660106,0.07680855132803983,0.018295325646908882,0.01736265868461431,0.006780524743134666,0.014871940785739182,0.016001923016026258,0.018266505325418615,0.014813538949554499,0.009003341925101542,0.016661529379186604,0.006544060536868586,0.008732758420947428,0.008256886410369254,0.010718895627805602,0.013605704933570972,0.014647307333164852,0.03840427566401992,0.015552476594618555,0.028213987395708,0.01499017276190086,0.006948883869872641,0.03840427566401992,0.0025141933891318076,0.011035868641928081,0.019537033839499195,0.014174472272339774,0.025897184157739277,0.016039128642034457,0.014828511622359665,0.015268932648949704,0.007712226900661312,0.07680855132803983,0.015590967344919842,0.010620993293783656,0.03840427566401992,0.010067112919081746,0.018051419635630814,0.012339227412423466,0.19202137832009958,0.013435569592452304,0.023843706259481012,0.009245197511793212,0.014898179269651656,0.014005137667143371,0.005630974485263177,0.013277518705300598,0.02599851942675946,0.015428676582478144,0.014484740885119855,0.012550490498516595,0.2688299296481394,0.007813289430482076,0.011473159052712699,0.03840427566401992,0.011502099707535523,0.008084443685852061,0.018900750396294037,0.011809786694265753,0.007657495099351336,0.03840427566401992,0.011156882980280997,0.012971219668343928,0.008529733877170561,0.01919959497267052,0.019415999904894024,0.014133977056497717,0.010739629281650018,0.006842313086200255,0.01807183207073847,0.019262358611209607,0.011735660968613861,0.011226227458405728,0.04002012116301162,0.013554962881113996,0.007132207552328645,0.005614958896044672,0.016470014121093505,0.00888263368831069,0.03840427566401992,0.015475195089520125,0.03840427566401992,0.03840427566401992,0.014969871332027007,0.014000935883530529,0.011692554596826735,0.010401830924921456,0.012478191934361943,0.013417794463680802,0.028268216467533053,0.014601258878658067,0.012655730312795588,0.07680855132803983,0.012926385954691354,0.01019223892473447,0.016469397812652407,0.01291790030848631,0.009113823629888374,0.07680855132803983,0.011866072954578312,0.01516504037526196,0.008529994379802227,0.004404659923587876,0.01001209790207507,0.007829933359890646,0.015702184461772503,0.006396990518451552,0.013380154224833305,0.012231529872895351,0.00838537005386909,0.007867914694700563,0.009826126517037223,0.014264236555472461,0.03978295664786465,0.008162725908356872,0.018100795316307084,0.013065179407700045,0.008120443365174113,0.03495107965542095,0.0064008281857305645,0.010227844583871255,0.8832983402724581,0.014179881562716663,0.013827119657134119,0.00902322130972443,0.011574157518165717,0.007796943327520603,0.012917398043123434,0.016537317652769827,0.01626383411099683,0.009977557679745607,0.013320286813749211,0.012662656202264672,0.010780077065519608,0.03840427566401992,0.03052728462659311,0.01720940647188121,0.012142827169923903,0.01368611910331407,0.015059114417244012,0.050111180555817585,0.008195661575779755,0.0043770485193084735,0.01643913331386634,0.013176893992758428,0.01625415160940142,0.015211509069004486,0.0116382972113448,0.010139229021107574,0.011834121148906206,0.012674867306607,0.008717211297829463,0.014813558801981019,0.01955982617243093,0.07680855132803983,0.013491328420978025,0.012562585792989824,0.01680661834025053,0.013982500479897525,0.007418256933856344,0.03840427566401992,0.008943071310010929,0.010829896708939772,0.00795374365625766,0.008575534006628274,0.008888530346493935,0.03619127021672257,0.032491496797840365,0.009459374858669128,0.01844706503336264,0.00668657646597358,0.010377446132240075,0.019458237779714935,0.03840427566401992,0.009958657058500249,0.014241606704721079,0.005734644045275617,0.009895557147152184,0.017786306637286236,0.0071582696351915965,0.014355307726002207,0.01150112054211369,0.03840427566401992,0.007338695860451086,0.014334376045531958,0.015875641192641166,0.02110913824088957,0.03840427566401992,0.009537726626350173,0.006912177308023545,0.01459194357778371,0.04750621583990403,0.03840427566401992,0.010631993327234787,0.017098854100531483,0.061665023979483764,0.0072779465376930225,0.019135040639922395,0.015706211862313992,0.012460098114802639,0.013936503644716018,0.01472104513783463,0.03702095857282894,0.01353071699164448,0.02822253877828585,0.01066966359152096,0.013664293021154617,0.01378732929478962,0.007848234695728708,0.013045380516009496,0.01068921194788491,0.04416539486208933,0.025225968333499466,0.015375630176389654,0.00847899685466166,0.03172512995319212,0.008629151056350554,0.010473659892697147,0.009179355621989791,0.012538802446977082,0.01635546660074985,0.011779801901267137,0.009036021696347927,0.010292797421705692,0.020651520288283057,0.012017872470705548,0.012964881744419085,0.013626133068855692,0.01646604492667835,0.008010995482352267,0.027891690737725645,0.002948491522349453,0.0066743888964084005,0.010277426991250074,0.01015993792529315,0.02526764919902982,0.03840427566401992,0.011380518841471843,0.008448924783017361,0.010141428456051566,0.015265104653994784,0.00722596550537968,0.010197579516819917,0.014441749993493333,0.00542578631602507,0.007756789864417488,0.017732301880847626,0.02268420373050106,0.01434570857916699,0.013429800906695351,0.01576428655688904,0.02144038284323713,0.01219780623432413,0.01022722618680107,0.011672075268814336,0.012767221537494175,0.011102050601635622,0.006914354725824196,0.014875245041450526,0.012839546539129717,0.010493832313215686,0.03272221868659881,0.008372064239950417,0.02434171305556117,0.013797830438160802,0.03840427566401992,0.03840427566401992,0.01559426534966859,0.006482629156899062,0.012376026899567663,0.01755418351766748,0.018524201246429638,0.01108786162135027,0.019457234564053703,0.010179552979134665,0.006734175607503814,0.018457015229575716,0.03840427566401992,0.012758100734003231,0.013736926797032298,0.02076909886653282,0.015314138042753351,0.01528092376478139,0.00813851954369005,0.011973258334992763,0.03286106116847726,0.03840427566401992,0.03840427566401992,0.010368432831889388,0.013097147252910227,0.011792267855079929,0.014646584483008806,0.015524023822233978,0.01523441022107498,0.00940864128507004,0.013824808413643828,0.012940969253861024,0.03328341096538021,0.014544013420634501,0.009693924043022658,0.012679748185270588,0.01944487108481679,0.009307942974839757,0.010075291946258115,0.00891184817165142,0.015543982955478573,0.0195415508751179,0.011364082796522972,0.01337993270600152,0.007672372206944081,0.014509168901502424,0.01579952667573058,0.01856956884856314,0.013547852819828754";


        String words1 = "处于,硬件,大展,的功能,看家,爆,领域,国内的,摄像机,选择,耗费,实时,普遍存在,和家人,智慧,国内,化的,的是,韩国,性,阶段,中,了一,研发,切入,一举,增多,为重要,最高的,携,考量,全双工,亲人,手机,超强,驱动,片,日趋,回来了,节节,ces,体现了,等的,便是,塞,通讯的,mini,七成,辐射,值得称赞,而更,的特征,交互,扮演,海外,起步阶段,具备,占比,投的,更能,机的,核心,新鲜的,此番,的智能,标准,布局,可以说,力,人与,仍处于,级,商用,独特的,优势,再度,杀出,实力,炸,背景下,通讯,彰显,在中国,家庭的,拉,熟的,强势,显着,走到,巨头的,却已经,是在,智能家居,而此,超高的,回,接受,收入,就能,打回,中兴,产品,超过,时是,肯定了,情感,速度很快,创新,打开,模式,角度,随心,摄像,通路,借着,机能,情况下,通话,更多的,入口,打破了,欧非,五大,第一颗,家庭成员,半双工,兴起的,的第,的同时,海外市场,天地,的特点,能力,弱,中兴通讯,中国市场,成效,一款,在这一,独有的,款,杀,概念阶段,时的,很多的,一半,力的,家居,作用,唤醒功能,其成,尝试,性价比,沟通,也进,在这样的,采取了,成为可能,北美,2014年,的入口,国际性,市场的,硬件产品,这也是,一步,畅谈,完善的,深耕细作,机具,市场,其是,兴,饶,影响,在这种情况下,发货,有成为,找到,发挥,成熟,及市场,非洲,卓越的,王,统一协调,已然,软硬件,全球,体验,夺得,连接,品牌,之间的,网络,从人,野心,的角色,图以,差异化,降噪,在国外,上的,重返,传统,延时的,重金,更是,语音,销售业绩,家庭,支持,能看,科技公司,1秒,技术优势,资源共享,提供,还将推出,硬件技术,智能,双向,量,下的,屡创,带着,金,一席之地,问路,攀高,试,亚太,佳绩,全球化,日本,影响力,区域,石,家用的,程度,东和,的技术";
        String weights1 = "0.024448496909649755,0.011420600194364536,0.01881260278613601,0.01284968918243046,0.022785677120136332,0.16468461725666178,0.009486652785041502,0.03421049599367445,0.10908272865630846,0.005397478285979898,0.018715220145116746,0.012330474934535459,0.021714367482174094,0.054894872418887256,0.011720571597686521,0.01604969319714856,0.012536225493738345,0.007731585731584422,0.008291468328255499,0.054894872418887256,0.012384239238146175,0.054894872418887256,0.009354046185264607,0.011907951832963335,0.020859403147936342,0.017265618401357416,0.016009984205517636,0.023386021849191845,0.014398633748325318,0.054894872418887256,0.019599462469708066,0.026764851637203105,0.015260152403875241,0.0071875499769992884,0.013572398229255229,0.012539006184169666,0.054894872418887256,0.03815987065591573,0.01550031894824329,0.02039439431532169,0.054894872418887256,0.016756411133744733,0.014618255557021903,0.013486652558644577,0.054894872418887256,0.02329788208376307,0.10978974483777451,0.017765314981209746,0.014844499481044979,0.026886158578339304,0.019214623311733348,0.017103026411088133,0.018541243066266144,0.016077906266802822,0.01801432594660623,0.02350693262629658,0.012391084118479579,0.03865695857818452,0.022488814151953373,0.03203398151492179,0.011640092935656947,0.01149077068007291,0.017887276645323857,0.02015206134722063,0.038136369062159,0.008025993119418321,0.013923109053893415,0.014373871404728915,0.054894872418887256,0.02862883550322019,0.021132839578967062,0.054894872418887256,0.013901268906459874,0.013618443727827657,0.011321777755605462,0.01381990343031098,0.020613429000843803,0.011192066128258675,0.054894872418887256,0.016967475111914515,0.010691509504239435,0.016012567357696964,0.012608946736645204,0.01685128020700248,0.054894872418887256,0.01814302880050642,0.01406439815705832,0.02175762838355767,0.013249302575282564,0.024017523742438356,0.019735880313188275,0.009149310605539942,0.8783179587021961,0.01917713996881289,0.021732161872664895,0.054894872418887256,0.009727278801519017,0.012244221766781646,0.010908559405944067,0.022932876603644684,0.1975561164920726,0.014325732308752464,0.019890756128744136,0.017327296300339884,0.020963957737138945,0.008876636389949955,0.020346272140195895,0.010587212054441766,0.009385248978884651,0.00813444450927354,0.012118914180015648,0.017372248254059235,0.04087088228656767,0.01803102712000207,0.016665704447465277,0.017258277495998967,0.025407221575490888,0.031427829083635395,0.011708000461556086,0.03509463887890831,0.01813147620491115,0.030891484977742006,0.013721521283790667,0.02421675759883041,0.06152852513141364,0.028362498135365437,0.023029642121562794,0.011543263011575986,0.011755452448900465,0.02099313738023137,0.009788626177326827,0.013500815527744792,0.019370279463998306,0.054894872418887256,0.021220366430333544,0.03408781951731333,0.016615014959963377,0.012098656246304476,0.01807608407896137,0.017528097740674785,0.16468461725666178,0.054894872418887256,0.03277113424650086,0.011371772539271763,0.015721387807030942,0.013566777433122405,0.023633621131802687,0.006948420979239381,0.011016738858519207,0.031090907981514707,0.021937256367237052,0.012555500932819657,0.01326948679556703,0.03372899683881117,0.019745884383009837,0.017965413819168906,0.018427765050344627,0.022911332295027453,0.03029396832031738,0.054894872418887256,0.020808630436679708,0.02156296362967515,0.012916042540024701,0.023582310871618505,0.014423415702548742,0.02146596339774345,0.01849403096622588,0.014636610311980616,0.030001007525604438,0.020836165436217753,0.030886557854139608,0.021955953999360324,0.21957948967554902,0.054894872418887256,0.00894290165893054,0.018658754836445746,0.009780801089555523,0.024695687153274533,0.0072144549098799365,0.013187486129665534,0.012520546781827199,0.01979955736095264,0.013848817392435821,0.01770229184030769,0.054894872418887256,0.027146584545506374,0.017195803834093065,0.01893213854648402,0.023266772444510968,0.008106170785539282,0.018916793057086097,0.04939077795173805,0.025426191931513555,0.01196956098288456,0.010423621120892063,0.020837078611896685,0.01840599247478183,0.015580522665239517,0.023687449200546266,0.054894872418887256,0.020400977639576958,0.018183636987548674,0.007137929319413165,0.0170469755084048,0.010662470395834078,0.02833629806094273,0.018715016719850163,0.010904577636356714,0.027909865254780876,0.020634298300494153,0.017381609550100673,0.00612998027144707,0.01554819384814671,0.018238982985065533,0.054894872418887256,0.02134326240520374,0.01560645571775004,0.0049574281206811975,0.026431073521761633,0.022563854892794576,0.12864471613007072,0.016732495232888896,0.054894872418887256,0.010142704890083362,0.02546685060082299,0.010911671600816374,0.054894872418887256,0.021678678284935138,0.019861749449633346,0.022638837375452765,0.054894872418887256,0.016392845884459595,0.020134081637007677,0.019101813060473226,0.007035242239276279,0.015093035412572859,0.007827493283122534,0.054894872418887256,0.024572051266970017,0.010804114633949749,0.01930218640336909,0.013271622692921209";

        String[] split = weights.split(",");
        List<String> list = Arrays.asList(split);
        String hashCode = judge.getHashCode(words, list);
        System.out.println(hashCode);

        String[] split1 = weights1.split(",");
        List<String> list1 = Arrays.asList(split1);
        String hashCode2 = judge.getHashCode(words1, list1);

        System.out.println(hashCode2);

        int distance;

        if (hashCode.length() != hashCode2.length()) {
            distance = -1;
        } else {
            distance = 0;
            for (int i = 0; i < hashCode.length(); i++) {
                if (hashCode.charAt(i) != hashCode2.charAt(i)) {
                    distance++;
                }
            }
        }
        System.out.println(distance);

    }
}
